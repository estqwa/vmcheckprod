saizhansco@instance-20260124-111940:~/myapp/trivia-api$ sudo docker-compose logs --tail=200 app
Attaching to trivia-api_app_1
app_1       | 2026/02/12 16:10:21 Загрузка конфигурации из config/config.yaml
app_1       | 2026/02/12 16:10:21 Запуск применения миграций базы данных...
app_1       | 2026/02/12 16:10:21 Применяем миграции 'up'...
app_1       | 2026/02/12 16:10:21 Миграции успешно применены.
app_1       | 2026/02/12 16:10:21 Миграции базы данных завершены.
app_1       | 2026/02/12 16:10:21 Successfully connected to Redis
app_1       | 2026/02/12 16:10:21 [TokenManager] Initializing and ensuring JWT keys...
app_1       | 2026/02/12 16:10:21 [TokenManager] Active JWT key ID: a488fda381b19b17 found in repository.
app_1       | 2026/02/12 16:10:21 [TokenManager] Access token expiry set to: 24h0m0s
app_1       | 2026/02/12 16:10:21 [TokenManager] Refresh token expiry set to: 720h0m0s
app_1       | 2026/02/12 16:10:21 [TokenManager] Max refresh tokens per user set to: 10
app_1       | 2026/02/12 16:10:21 [TokenManager] Production mode set to: true, Cookie Secure set to: true
app_1       | 2026/02/12 16:10:21 [TokenManager] Cookie attributes set: Path=/, Domain=, Secure=true, HttpOnly=true, SameSite=4
app_1       | 2026/02/12 16:10:21 Инициализация Redis PubSub для кластеризации WebSocket...
app_1       | 
app_1       | 2026/02/12 16:10:21 /app/internal/repository/postgres/jwt_key_repo.go:99
app_1       | [58.181ms] [rows:1] SELECT * FROM "jwt_keys" WHERE is_active = true AND expires_at > '2026-02-12 16:10:21.891' ORDER BY created_at DESC,"jwt_keys"."id" LIMIT 1
app_1       | 2026/02/12 16:10:21 RedisPubSub provider created using existing client.
app_1       | 2026/02/12 16:10:21 Redis PubSub провайдер успешно инициализирован
app_1       | 
app_1       | 2026/02/12 16:10:21 /app/internal/repository/postgres/invalid_token_repo.go:89
app_1       | [3.022ms] [rows:0] SELECT * FROM "invalid_tokens"
app_1       | 2026/02/12 16:10:21 Получено 0 записей из invalid_tokens
app_1       | 2026/02/12 16:10:21 JWT: Loaded 0 invalidated tokens from database
app_1       | 2026/02/12 16:10:21 [TokenManager] JWTService has been set.
app_1       | 2026/02/12 16:10:21 WebSocket: инициализация ShardedHub
app_1       | 2026/02/12 16:10:21 WorkerPool: запущен пул с 8 воркерами
app_1       | 2026/02/12 16:10:21 WorkerPool: запущен пул с 8 воркерами
app_1       | 2026/02/12 16:10:21 [Шард 0] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 6 запущен
app_1       | 2026/02/12 16:10:21 [JWTService] Starting periodic cleanup routine every 1h0m0s
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'jwt_invalidation_events'
app_1       | 2026/02/12 16:10:21 Запуск механизма периодической очистки CSRF токенов и истекших refresh-токенов (каждый час)
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 0 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 1 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 2 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 3 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 4 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 5 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 4 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 7 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 0 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 1 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 2 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 3 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 7 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 5 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 6 запущен
app_1       | 2026/02/12 16:10:21 [Shard 0] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 [Шард 1] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 [Шард 2] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 [Шард 3] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 ClusterHub: Instance ID не задан, сгенерирован: instance_20260212161021_R8N2QP1y
app_1       | 2026/02/12 16:10:21 ShardedHub создан с 4 шардами
app_1       | 2026/02/12 16:10:21 WebSocket: кластерный режим включен
app_1       | 2026/02/12 16:10:21 [QuizManager] Менеджер викторин успешно инициализирован
app_1       | 2026/02/12 16:10:21 [Shard 1] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 [Shard 2] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 [Shard 3] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 ShardedHub: запуск с 4 шардами, до 5000 клиентов на шард
app_1       | 2026/02/12 16:10:21 ClusterHub: запуск кластерного режима, ID экземпляра: instance_20260212161021_R8N2QP1y
app_1       | 2026/02/12 16:10:21 ClusterHub: Запуск публикации метрик каждые 1m0s
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'jwt_invalidation_events'
app_1       | 2026/02/12 16:10:21 [JWTService] Успешно подписан на канал jwt_invalidation_events для синхронизации кэша.
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'ws:broadcast'
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:ready
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:answer
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:heartbeat
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:resync
app_1       | 2026/02/12 16:10:21 Server started on port 8080
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'ws:broadcast'
app_1       | 2026/02/12 16:10:21 ClusterHub: начата обработка широковещательных сообщений
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'ws:direct'
app_1       | 2026/02/12 16:10:21 Starting server on port 8080
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'ws:direct'
app_1       | 2026/02/12 16:10:21 [ClusterHub:Direct] Успешно подписан на канал прямых сообщений: ws:direct
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'ws:metrics'
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'ws:metrics'
app_1       | 2026/02/12 16:10:21 [ClusterHub:Metrics] Успешно подписан на канал метрик: ws:metrics
app_1       | 
app_1       | 2026/02/12 16:10:21 /app/internal/repository/postgres/quiz_repo.go:63
app_1       | [24.287ms] [rows:0] SELECT * FROM "quizzes" WHERE status = 'scheduled' AND scheduled_time > '2026-02-12 16:10:21.971' ORDER BY scheduled_time
app_1       | 2026/02/12 16:11:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
saizhansco@instance-20260124-111940:~/myapp/trivia-api$ sudo docker-compose exec postgres psql -U postgres -d trivia_db -c "SELECT column_name FROM information_schema.columns WHERE table_name='quizzes' AND column_name='finish_on_zero_players';"
sudo docker-compose exec postgres psql -U postgres -d trivia_db -c "SELECT to_regclass('public.quiz_question_history');"
      column_name       
------------------------
 finish_on_zero_players
(1 row)

      to_regclass      
-----------------------
 quiz_question_history
(1 row)

saizhansco@instance-20260124-111940:~/myapp/trivia-api$ sudo docker-compose exec postgres psql -U postgres -d trivia_db -c "SELECT id,title,status,updated_at FROM quizzes WHERE status='in_progress' ORDER BY updated_at DESC;"
 id | title | status | updated_at 
----+-------+--------+------------
(0 rows)

saizhansco@instance-20260124-111940:~/myapp/trivia-api$ ^C
saizhansco@instance-20260124-111940:~/myapp/trivia-api$ sudo docker-compose logs -f
Attaching to trivia-api_nginx_1, trivia-api_app_1, trivia-api_redis_1, trivia-api_frontend_1, trivia-api_postgres_1
frontend_1  | ▲ Next.js 16.1.4
frontend_1  | - Local:         http://localhost:3000
frontend_1  | - Network:       http://0.0.0.0:3000
frontend_1  | 
frontend_1  | ✓ Starting...
frontend_1  | ✓ Ready in 401ms
nginx_1     | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx_1     | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx_1     | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx_1     | 10-listen-on-ipv6-by-default.sh: info: can not modify /etc/nginx/conf.d/default.conf (read-only file system?)
nginx_1     | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx_1     | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx_1     | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx_1     | /docker-entrypoint.sh: Configuration complete; ready for start up
nginx_1     | 2026/02/12 16:10:22 [warn] 1#1: the "listen ... http2" directive is deprecated, use the "http2" directive instead in /etc/nginx/conf.d/default.conf:11
nginx_1     | nginx: [warn] the "listen ... http2" directive is deprecated, use the "http2" directive instead in /etc/nginx/conf.d/default.conf:11
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: using the "epoll" event method
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: nginx/1.29.5
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: built by gcc 15.2.0 (Alpine 15.2.0) 
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: OS: Linux 6.8.0-1045-gcp
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: start worker processes
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: start worker process 21
nginx_1     | 2026/02/12 16:10:22 [notice] 1#1: start worker process 22
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:21 +0000] "GET / HTTP/2.0" 200 4991 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:21 +0000] "GET /_next/static/chunks/ea90a7651b36719c.js HTTP/2.0" 200 9247 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /api/quizzes/scheduled HTTP/2.0" 200 2 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /api/users/me HTTP/2.0" 200 287 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /api/auth/csrf HTTP/2.0" 200 81 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /?_rsc=eqsj3 HTTP/2.0" 200 329 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /profile?_rsc=eqsj3 HTTP/2.0" 200 341 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /leaderboard?_rsc=eqsj3 HTTP/2.0" 200 341 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /?_rsc=7uv5c HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /?_rsc=tqohj HTTP/2.0" 200 1136 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /profile?_rsc=7uv5c HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /profile?_rsc=mubk8 HTTP/2.0" 200 2350 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /profile?_rsc=t8ou9 HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /profile?_rsc=acm04 HTTP/2.0" 200 530 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /leaderboard?_rsc=7uv5c HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /leaderboard?_rsc=1x3py HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /leaderboard?_rsc=1vblc HTTP/2.0" 200 530 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /_next/static/chunks/3faa385a9f38676c.js HTTP/2.0" 200 11570 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:22 +0000] "GET /?_rsc=2mwil HTTP/2.0" 200 529 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:13:23 +0000] "GET /_next/static/chunks/20906eabee32e577.js HTTP/2.0" 200 11467 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:09 +0000] "GET /api/users/me HTTP/2.0" 200 287 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:19 +0000] "GET /api/auth/sessions HTTP/2.0" 200 3086 "https://qazaquiz.duckdns.org/profile" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:19 +0000] "GET /profile/history?_rsc=1ugzb HTTP/2.0" 200 353 "https://qazaquiz.duckdns.org/profile" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:19 +0000] "GET /profile/history?_rsc=ys5m8 HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/profile" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:19 +0000] "GET /profile/history?_rsc=baz01 HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/profile" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:19 +0000] "GET /profile/history?_rsc=2dhtl HTTP/2.0" 200 530 "https://qazaquiz.duckdns.org/profile" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:22 +0000] "GET /admin?_rsc=1143l HTTP/2.0" 200 1952 "https://qazaquiz.duckdns.org/profile" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:22 +0000] "GET /_next/static/chunks/a22349f7259d4517.js HTTP/2.0" 200 9551 "https://qazaquiz.duckdns.org/profile" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /api/quizzes?page=1&page_size=100 HTTP/2.0" 200 12385 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/quizzes/new?_rsc=17qrm HTTP/2.0" 200 344 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/question-pool?_rsc=17qrm HTTP/2.0" 200 341 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/ads?_rsc=17qrm HTTP/2.0" 200 330 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/monitoring?_rsc=17qrm HTTP/2.0" 200 338 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/quizzes/new?_rsc=m0mb1 HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/quizzes/new?_rsc=rjpof HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/quizzes/new?_rsc=1ijyj HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/quizzes/new?_rsc=14zdw HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/quizzes/new?_rsc=p7cw9 HTTP/2.0" 200 494 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/question-pool?_rsc=m0mb1 HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/question-pool?_rsc=dki0b HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/question-pool?_rsc=dyoas HTTP/2.0" 200 496 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /_next/static/chunks/7f24407fb1c19df9.js HTTP/2.0" 200 9779 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/ads?_rsc=m0mb1 HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/ads?_rsc=1cj06 HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/ads?_rsc=hjmgi HTTP/2.0" 200 496 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/monitoring?_rsc=m0mb1 HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/monitoring?_rsc=1iinw HTTP/2.0" 200 258 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:23 +0000] "GET /admin/monitoring?_rsc=1majf HTTP/2.0" 200 495 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:24 +0000] "GET /admin?_rsc=1kaua HTTP/2.0" 200 325 "https://qazaquiz.duckdns.org/admin/quizzes/new" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:24 +0000] "GET /admin?_rsc=19m7j HTTP/2.0" 200 589 "https://qazaquiz.duckdns.org/admin/quizzes/new" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:24 +0000] "GET /admin?_rsc=bs77n HTTP/2.0" 200 496 "https://qazaquiz.duckdns.org/admin/quizzes/new" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:46 +0000] "POST /api/quizzes HTTP/2.0" 201 298 "https://qazaquiz.duckdns.org/admin/quizzes/new" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:46 +0000] "GET /admin/quizzes/39?_rsc=526y9 HTTP/2.0" 200 1173 "https://qazaquiz.duckdns.org/admin/quizzes/new" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:47 +0000] "GET /_next/static/chunks/848d9617d92e37e1.js HTTP/2.0" 200 12959 "https://qazaquiz.duckdns.org/admin/quizzes/new" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:47 +0000] "GET /api/quizzes/39/with-questions HTTP/2.0" 200 291 "https://qazaquiz.duckdns.org/admin/quizzes/39" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:47 +0000] "GET /admin/quiz-live/39?_rsc=3uwmu HTTP/2.0" 200 172 "https://qazaquiz.duckdns.org/admin/quizzes/39" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:47 +0000] "GET /admin/quiz-live/39?_rsc=2yizj HTTP/2.0" 200 819 "https://qazaquiz.duckdns.org/admin/quizzes/39" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:52 +0000] "GET /api/quizzes?page=1&page_size=100 HTTP/2.0" 200 12677 "https://qazaquiz.duckdns.org/admin" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:53 +0000] "GET /api/quizzes/scheduled HTTP/2.0" 200 293 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:53 +0000] "GET /quiz/39/lobby?_rsc=eqsj3 HTTP/2.0" 200 183 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:53 +0000] "GET /quiz/39/lobby?_rsc=1a28h HTTP/2.0" 200 829 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:55 +0000] "GET /quiz/39/lobby?_rsc=1cmue HTTP/2.0" 200 1402 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:55 +0000] "GET /_next/static/chunks/18d7ebed9d3b2ed1.js HTTP/2.0" 200 9421 "https://qazaquiz.duckdns.org/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:56 +0000] "GET /api/quizzes/39 HTTP/2.0" 200 291 "https://qazaquiz.duckdns.org/quiz/39/lobby" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:14:56 +0000] "POST /api/auth/ws-ticket HTTP/2.0" 200 363 "https://qazaquiz.duckdns.org/quiz/39/lobby" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
postgres_1  | 
postgres_1  | PostgreSQL Database directory appears to contain a database; Skipping initialization
postgres_1  | 
postgres_1  | 2026-02-12 16:10:21.262 UTC [1] LOG:  starting PostgreSQL 13.23 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
postgres_1  | 2026-02-12 16:10:21.263 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
postgres_1  | 2026-02-12 16:10:21.263 UTC [1] LOG:  listening on IPv6 address "::", port 5432
postgres_1  | 2026-02-12 16:10:21.269 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres_1  | 2026-02-12 16:10:21.282 UTC [26] LOG:  database system was shut down at 2026-02-12 16:08:33 UTC
postgres_1  | 2026-02-12 16:10:21.316 UTC [1] LOG:  database system is ready to accept connections
app_1       | 2026/02/12 16:10:21 Загрузка конфигурации из config/config.yaml
app_1       | 2026/02/12 16:10:21 Запуск применения миграций базы данных...
app_1       | 2026/02/12 16:10:21 Применяем миграции 'up'...
app_1       | 2026/02/12 16:10:21 Миграции успешно применены.
app_1       | 2026/02/12 16:10:21 Миграции базы данных завершены.
app_1       | 2026/02/12 16:10:21 Successfully connected to Redis
app_1       | 2026/02/12 16:10:21 [TokenManager] Initializing and ensuring JWT keys...
app_1       | 2026/02/12 16:10:21 [TokenManager] Active JWT key ID: a488fda381b19b17 found in repository.
app_1       | 2026/02/12 16:10:21 [TokenManager] Access token expiry set to: 24h0m0s
app_1       | 2026/02/12 16:10:21 [TokenManager] Refresh token expiry set to: 720h0m0s
app_1       | 2026/02/12 16:10:21 [TokenManager] Max refresh tokens per user set to: 10
app_1       | 2026/02/12 16:10:21 [TokenManager] Production mode set to: true, Cookie Secure set to: true
app_1       | 2026/02/12 16:10:21 [TokenManager] Cookie attributes set: Path=/, Domain=, Secure=true, HttpOnly=true, SameSite=4
app_1       | 2026/02/12 16:10:21 Инициализация Redis PubSub для кластеризации WebSocket...
app_1       | 
app_1       | 2026/02/12 16:10:21 /app/internal/repository/postgres/jwt_key_repo.go:99
app_1       | [58.181ms] [rows:1] SELECT * FROM "jwt_keys" WHERE is_active = true AND expires_at > '2026-02-12 16:10:21.891' ORDER BY created_at DESC,"jwt_keys"."id" LIMIT 1
app_1       | 2026/02/12 16:10:21 RedisPubSub provider created using existing client.
app_1       | 2026/02/12 16:10:21 Redis PubSub провайдер успешно инициализирован
app_1       | 
app_1       | 2026/02/12 16:10:21 /app/internal/repository/postgres/invalid_token_repo.go:89
app_1       | [3.022ms] [rows:0] SELECT * FROM "invalid_tokens"
app_1       | 2026/02/12 16:10:21 Получено 0 записей из invalid_tokens
app_1       | 2026/02/12 16:10:21 JWT: Loaded 0 invalidated tokens from database
app_1       | 2026/02/12 16:10:21 [TokenManager] JWTService has been set.
app_1       | 2026/02/12 16:10:21 WebSocket: инициализация ShardedHub
app_1       | 2026/02/12 16:10:21 WorkerPool: запущен пул с 8 воркерами
app_1       | 2026/02/12 16:10:21 WorkerPool: запущен пул с 8 воркерами
app_1       | 2026/02/12 16:10:21 [Шард 0] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 6 запущен
app_1       | 2026/02/12 16:10:21 [JWTService] Starting periodic cleanup routine every 1h0m0s
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'jwt_invalidation_events'
app_1       | 2026/02/12 16:10:21 Запуск механизма периодической очистки CSRF токенов и истекших refresh-токенов (каждый час)
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 0 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 1 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 2 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 3 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 4 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 5 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 4 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 7 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 0 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 1 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 2 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 3 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 7 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 5 запущен
app_1       | 2026/02/12 16:10:21 WorkerPool: воркер 6 запущен
app_1       | 2026/02/12 16:10:21 [Shard 0] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 [Шард 1] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 [Шард 2] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 [Шард 3] Создан с максимальным количеством клиентов 5000
app_1       | 2026/02/12 16:10:21 ClusterHub: Instance ID не задан, сгенерирован: instance_20260212161021_R8N2QP1y
app_1       | 2026/02/12 16:10:21 ShardedHub создан с 4 шардами
app_1       | 2026/02/12 16:10:21 WebSocket: кластерный режим включен
app_1       | 2026/02/12 16:10:21 [QuizManager] Менеджер викторин успешно инициализирован
app_1       | 2026/02/12 16:10:21 [Shard 1] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 [Shard 2] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 [Shard 3] Запуск рутины очистки каждые 5m0s с таймаутом 1m0s
app_1       | 2026/02/12 16:10:21 ShardedHub: запуск с 4 шардами, до 5000 клиентов на шард
app_1       | 2026/02/12 16:10:21 ClusterHub: запуск кластерного режима, ID экземпляра: instance_20260212161021_R8N2QP1y
app_1       | 2026/02/12 16:10:21 ClusterHub: Запуск публикации метрик каждые 1m0s
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'jwt_invalidation_events'
app_1       | 2026/02/12 16:10:21 [JWTService] Успешно подписан на канал jwt_invalidation_events для синхронизации кэша.
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'ws:broadcast'
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:ready
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:answer
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:heartbeat
app_1       | 2026/02/12 16:10:21 [WebSocketManager] Зарегистрирован обработчик для сообщений типа: user:resync
app_1       | 2026/02/12 16:10:21 Server started on port 8080
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'ws:broadcast'
app_1       | 2026/02/12 16:10:21 ClusterHub: начата обработка широковещательных сообщений
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'ws:direct'
app_1       | 2026/02/12 16:10:21 Starting server on port 8080
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'ws:direct'
app_1       | 2026/02/12 16:10:21 [ClusterHub:Direct] Успешно подписан на канал прямых сообщений: ws:direct
app_1       | 2026/02/12 16:10:21 RedisPubSub: Subscribing to channel 'ws:metrics'
app_1       | 2026/02/12 16:10:21 RedisPubSub: Successfully subscribed to channel 'ws:metrics'
app_1       | 2026/02/12 16:10:21 [ClusterHub:Metrics] Успешно подписан на канал метрик: ws:metrics
app_1       | 
app_1       | 2026/02/12 16:10:21 /app/internal/repository/postgres/quiz_repo.go:63
app_1       | [24.287ms] [rows:0] SELECT * FROM "quizzes" WHERE status = 'scheduled' AND scheduled_time > '2026-02-12 16:10:21.971' ORDER BY scheduled_time
app_1       | 2026/02/12 16:11:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
app_1       | 2026/02/12 16:12:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
app_1       | 2026/02/12 16:13:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
app_1       | 
app_1       | 2026/02/12 16:13:22 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [2.244ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:13:22.111') OR (is_active = false AND rotated_at > '2026-02-05 16:13:22.111' AND expires_at > '2026-02-12 16:13:22.111') ORDER BY created_at DESC
app_1       | 2026/02/12 16:13:22 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:13:22 /app/internal/repository/postgres/quiz_repo.go:63
app_1       | [1.984ms] [rows:0] SELECT * FROM "quizzes" WHERE status = 'scheduled' AND scheduled_time > '2026-02-12 16:13:22.113' ORDER BY scheduled_time
app_1       | [GIN] 2026/02/12 - 16:13:22 | 200 |    3.175701ms |      172.18.0.6 | GET      "/api/quizzes/scheduled"
app_1       | 
app_1       | 2026/02/12 16:13:22 /app/internal/repository/postgres/user_repo.go:33
app_1       | [18.418ms] [rows:1] SELECT * FROM "users" WHERE "users"."id" = 1 ORDER BY "users"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:13:22 | 200 |   21.688979ms |      172.18.0.6 | GET      "/api/users/me"
app_1       | 
app_1       | 2026/02/12 16:13:22 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [4.120ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:13:22.275') OR (is_active = false AND rotated_at > '2026-02-05 16:13:22.275' AND expires_at > '2026-02-12 16:13:22.275') ORDER BY created_at DESC
app_1       | [GIN] 2026/02/12 - 16:13:22 | 200 |    4.836759ms |      172.18.0.6 | GET      "/api/auth/csrf"
app_1       | 2026/02/12 16:13:22 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 2026/02/12 16:13:22 [TokenManager] Successfully retrieved CSRF secret cookie '__Host-csrf-secret'
app_1       | 
app_1       | 2026/02/12 16:14:09 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [1.760ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:14:09.489') OR (is_active = false AND rotated_at > '2026-02-05 16:14:09.489' AND expires_at > '2026-02-12 16:14:09.489') ORDER BY created_at DESC
app_1       | 2026/02/12 16:14:09 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:14:09 /app/internal/repository/postgres/user_repo.go:33
app_1       | [0.796ms] [rows:1] SELECT * FROM "users" WHERE "users"."id" = 1 ORDER BY "users"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:14:09 | 200 |    3.159506ms |      172.18.0.6 | GET      "/api/users/me"
app_1       | 
app_1       | 2026/02/12 16:14:19 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [1.960ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:14:19.072') OR (is_active = false AND rotated_at > '2026-02-05 16:14:19.072' AND expires_at > '2026-02-12 16:14:19.072') ORDER BY created_at DESC
app_1       | 2026/02/12 16:14:19 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:14:19 /app/internal/repository/postgres/refresh_token_repo.go:85
app_1       | [5.282ms] [rows:8] SELECT * FROM "refresh_tokens" WHERE user_id = 1 AND expires_at > '2026-02-12 16:14:19.074' ORDER BY created_at DESC
app_1       | [GIN] 2026/02/12 - 16:14:19 | 200 |    8.239764ms |      172.18.0.6 | GET      "/api/auth/sessions"
app_1       | 2026/02/12 16:14:19 [TokenManager] Получено 8 активных токенов пользователя ID=1
app_1       | 2026/02/12 16:14:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
app_1       | 
app_1       | 2026/02/12 16:14:23 /app/internal/repository/postgres/quiz_repo.go:170
app_1       | [3.861ms] [rows:38] SELECT * FROM "quizzes" ORDER BY id DESC LIMIT 100
app_1       | [GIN] 2026/02/12 - 16:14:23 | 200 |    4.652099ms |      172.18.0.6 | GET      "/api/quizzes?page=1&page_size=100"
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [1.579ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:14:46.712') OR (is_active = false AND rotated_at > '2026-02-05 16:14:46.712' AND expires_at > '2026-02-12 16:14:46.712') ORDER BY created_at DESC
app_1       | 2026/02/12 16:14:46 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 2026/02/12 16:14:46 [TokenManager] Successfully retrieved CSRF secret cookie '__Host-csrf-secret'
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [0.856ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:14:46.713') OR (is_active = false AND rotated_at > '2026-02-05 16:14:46.713' AND expires_at > '2026-02-12 16:14:46.713') ORDER BY created_at DESC
app_1       | 2026/02/12 16:14:46 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 2026/02/12 16:14:46 [QuizManager] Планирование викторины #39 на 2026-02-12 16:16:00 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/quiz_repo.go:29
app_1       | [4.618ms] [rows:1] INSERT INTO "quizzes" ("title","description","scheduled_time","status","question_count","prize_fund","finish_on_zero_players","created_at","updated_at") VALUES ('обновленный тест викторины 123','','2026-02-12 16:16:00','scheduled',0,1000000,false,'2026-02-12 16:14:46.716','2026-02-12 16:14:46.716') RETURNING "id"
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [4.393ms] [rows:0] SELECT * FROM "questions" WHERE "questions"."quiz_id" = 39
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [6.024ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 2026/02/12 16:14:46 [Scheduler] Pool check: needed=10, available=320
app_1       | 2026/02/12 16:14:46 [Scheduler] Quiz #39: no preset questions, using pool
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/question_repo.go:223
app_1       | [3.508ms] [rows:1] SELECT count(*) FROM "questions" WHERE quiz_id IS NULL AND is_used = false
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/quiz_repo.go:119
redis_1     | Starting Redis Server
redis_1     | 1:C 12 Feb 2026 16:10:21.035 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis_1     | 1:C 12 Feb 2026 16:10:21.035 * Redis version=8.4.0, bits=64, commit=00000000, modified=1, pid=1, just started
redis_1     | 1:C 12 Feb 2026 16:10:21.035 * Configuration loaded
redis_1     | 1:M 12 Feb 2026 16:10:21.037 * monotonic clock: POSIX clock_gettime
redis_1     | 1:M 12 Feb 2026 16:10:21.043 * Running mode=standalone, port=6379.
redis_1     | 1:M 12 Feb 2026 16:10:21.054 * <bf> RedisBloom version 8.4.0 (Git=unknown)
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf> Registering configuration options: [
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { bf-error-rate       :      0.01 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { bf-initial-size     :       100 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { bf-expansion-factor :         2 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { cf-bucket-size      :         2 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { cf-initial-size     :      1024 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { cf-max-iterations   :        20 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { cf-expansion-factor :         1 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf>       { cf-max-expansions   :        32 }
redis_1     | 1:M 12 Feb 2026 16:10:21.055 * <bf> ]
redis_1     | 1:M 12 Feb 2026 16:10:21.056 * Module 'bf' loaded from /usr/local/lib/redis/modules//redisbloom.so
redis_1     | 1:M 12 Feb 2026 16:10:21.133 * <search> Redis version found by RedisSearch : 8.4.0 - oss
redis_1     | 1:M 12 Feb 2026 16:10:21.133 * <search> RediSearch version 8.4.2 (Git=9e2b676)
redis_1     | 1:M 12 Feb 2026 16:10:21.134 * <search> Low level api version 1 initialized successfully
redis_1     | 1:M 12 Feb 2026 16:10:21.135 * <search> gc: ON, prefix min length: 2, min word length to stem: 4, prefix max expansions: 200, query timeout (ms): 500, timeout policy: return, oom policy: return, cursor read size: 1000, cursor max idle (ms): 300000, max doctable size: 1000000, max number of search results:  1000000, default scorer: BM25STD, 
redis_1     | 1:M 12 Feb 2026 16:10:21.135 * <search> Initialized thread pools!
redis_1     | 1:M 12 Feb 2026 16:10:21.135 * <search> Disabled workers threadpool of size 0
redis_1     | 1:M 12 Feb 2026 16:10:21.136 * <search> Subscribe to config changes
redis_1     | 1:M 12 Feb 2026 16:10:21.136 * <search> Subscribe to cluster slot migration events
redis_1     | 1:M 12 Feb 2026 16:10:21.136 * <search> Enabled role change notification
redis_1     | 1:M 12 Feb 2026 16:10:21.140 * <search> Cluster configuration: AUTO partitions, type: 0, coordinator timeout: 0ms
redis_1     | 1:M 12 Feb 2026 16:10:21.140 * <search> Register write commands
redis_1     | 1:M 12 Feb 2026 16:10:21.140 * Module 'search' loaded from /usr/local/lib/redis/modules//redisearch.so
redis_1     | 1:M 12 Feb 2026 16:10:21.144 * <timeseries> RedisTimeSeries version 80400, git_sha=3520a1568ad69076d60885c70711fbdc9b448749
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries> Redis version found by RedisTimeSeries : 8.4.0 - oss
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries> Registering configuration options: [
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-compaction-policy   :              }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-num-threads         :            3 }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-retention-policy    :            0 }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-duplicate-policy    :        block }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-chunk-size-bytes    :         4096 }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-encoding            :   compressed }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-ignore-max-time-diff:            0 }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries>       { ts-ignore-max-val-diff :     0.000000 }
redis_1     | 1:M 12 Feb 2026 16:10:21.146 * <timeseries> ]
redis_1     | 1:M 12 Feb 2026 16:10:21.148 * <timeseries> Detected redis oss
redis_1     | 1:M 12 Feb 2026 16:10:21.153 * <timeseries> Subscribe to ASM events
redis_1     | 1:M 12 Feb 2026 16:10:21.153 * <timeseries> Enabled diskless replication
redis_1     | 1:M 12 Feb 2026 16:10:21.153 * Module 'timeseries' loaded from /usr/local/lib/redis/modules//redistimeseries.so
redis_1     | 1:M 12 Feb 2026 16:10:21.168 * <ReJSON> Created new data type 'ReJSON-RL'
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> version: 80400 git sha: unknown branch: unknown
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Exported RedisJSON_V1 API
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Exported RedisJSON_V2 API
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Exported RedisJSON_V3 API
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Exported RedisJSON_V4 API
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Exported RedisJSON_V5 API
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Exported RedisJSON_V6 API
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Enabled diskless replication
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <ReJSON> Initialized shared string cache, thread safe: true.
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * Module 'ReJSON' loaded from /usr/local/lib/redis/modules//rejson.so
redis_1     | 1:M 12 Feb 2026 16:10:21.172 * <search> Acquired RedisJSON_V6 API
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * Server initialized
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * <search> Loading event starts
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * <search> Changing workers threadpool size from 0 to 4
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * <search> Enabled workers threadpool of size 4
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * Loading RDB produced by version 8.4.0
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * RDB age 108 seconds
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * RDB memory usage when created 1.31 Mb
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * Done loading RDB, keys loaded: 17, keys expired: 0.
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * <search> Changing workers threadpool size from 4 to 0
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * <search> Disabled workers threadpool of size 4
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * <search> Loading event ends
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * DB loaded from disk: 0.001 seconds
redis_1     | 1:M 12 Feb 2026 16:10:21.173 * Ready to accept connections tcp
app_1       | [3.479ms] [rows:1] UPDATE "quizzes" SET "scheduled_time"='2026-02-12 16:16:00',"status"='scheduled',"updated_at"='2026-02-12 16:14:46.73' WHERE id = 39
app_1       | 2026/02/12 16:14:46 [Scheduler] Викторина #39 запланирована на 2026-02-12 16:16:00 +0000 UTC
app_1       | [GIN] 2026/02/12 - 16:14:46 | 201 |   22.308345ms |      172.18.0.6 | POST     "/api/quizzes"
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [1.158ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [1.342ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 2026/02/12 16:14:46 [Scheduler] Викторина #39: планирую обратный отсчет через 13.262082828s
app_1       | 
app_1       | 2026/02/12 16:14:46 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [0.811ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:14:47 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [0.705ms] [rows:0] SELECT * FROM "questions" WHERE "questions"."quiz_id" = 39
app_1       | 
app_1       | 2026/02/12 16:14:47 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [1.963ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:14:47 | 200 |    2.227616ms |      172.18.0.6 | GET      "/api/quizzes/39/with-questions"
app_1       | 
app_1       | 2026/02/12 16:14:52 /app/internal/repository/postgres/quiz_repo.go:170
app_1       | [2.279ms] [rows:39] SELECT * FROM "quizzes" ORDER BY id DESC LIMIT 100
app_1       | [GIN] 2026/02/12 - 16:14:52 | 200 |    2.999023ms |      172.18.0.6 | GET      "/api/quizzes?page=1&page_size=100"
app_1       | 
app_1       | 2026/02/12 16:14:53 /app/internal/repository/postgres/quiz_repo.go:63
app_1       | [3.911ms] [rows:1] SELECT * FROM "quizzes" WHERE status = 'scheduled' AND scheduled_time > '2026-02-12 16:14:53.49' ORDER BY scheduled_time
app_1       | [GIN] 2026/02/12 - 16:14:53 | 200 |     4.27376ms |      172.18.0.6 | GET      "/api/quizzes/scheduled"
app_1       | 
app_1       | 2026/02/12 16:14:56 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [1.054ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:14:56 | 200 |    1.313075ms |      172.18.0.6 | GET      "/api/quizzes/39"
app_1       | 
app_1       | 2026/02/12 16:14:56 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [1.233ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:14:56.164') OR (is_active = false AND rotated_at > '2026-02-05 16:14:56.164' AND expires_at > '2026-02-12 16:14:56.164') ORDER BY created_at DESC
app_1       | 2026/02/12 16:14:56 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 2026/02/12 16:14:56 [TokenManager] Successfully retrieved CSRF secret cookie '__Host-csrf-secret'
app_1       | 
app_1       | 2026/02/12 16:14:56 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [0.950ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:14:56.165') OR (is_active = false AND rotated_at > '2026-02-05 16:14:56.165' AND expires_at > '2026-02-12 16:14:56.165') ORDER BY created_at DESC
app_1       | 2026/02/12 16:14:56 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:14:56 /app/internal/repository/postgres/jwt_key_repo.go:99
app_1       | [2.407ms] [rows:1] SELECT * FROM "jwt_keys" WHERE is_active = true AND expires_at > '2026-02-12 16:14:56.166' ORDER BY created_at DESC,"jwt_keys"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:14:56 | 200 |    6.140086ms |      172.18.0.6 | POST     "/api/auth/ws-ticket"
app_1       | 2026/02/12 16:14:56 [JWT] WS-тикет успешно сгенерирован для пользователя ID=1 с ключом ID=a488fda381b19b17, истекает через 1m0s
app_1       | 
app_1       | 2026/02/12 16:14:56 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [0.792ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:14:56.603') OR (is_active = false AND rotated_at > '2026-02-05 16:14:56.603' AND expires_at > '2026-02-12 16:14:56.603') ORDER BY created_at DESC
app_1       | 2026/02/12 16:14:56 WebSocket: Connection upgraded for UserID: 1
app_1       | 2026/02/12 16:14:56 WebSocket: registering client 1 in ShardedHub
app_1       | 2026/02/12 16:14:56 Shard 0: client 1 registered
app_1       | 2026/02/12 16:14:56 WebSocket: client 1 fully registered, starting pumps
app_1       | 2026/02/12 16:14:56 WebSocket Client Write Pump STARTED for UserID: 1, ConnID: 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:14:56 WebSocket Client Read Pump STARTED for UserID: 1, ConnID: 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | [GIN] 2026/02/12 - 16:14:56 | 200 |    1.861108ms |      172.18.0.6 | GET      "/ws?ticket=eyJhbGciOiJIUzI1NiIsImtpZCI6ImE0ODhmZGEzODFiMTliMTciLCJ0eXAiOiJKV1QifQ.eyJ1c2VyX2lkIjoxLCJlbWFpbCI6InRlbWlybGFuQG1haWwucnUiLCJyb2xlIjoiIiwiaXNzIjoidHJpdmlhLWFwaSIsInN1YiI6IjEiLCJhdWQiOlsidHJpdmlhLXdzIl0sImV4cCI6MTc3MDkxMjk1NiwiaWF0IjoxNzcwOTEyODk2LCJ1c2FnZSI6IndlYnNvY2tldF9hdXRoIn0.7FcDGWUgxw9_1-kVbWrB0J3FeOyh0ridXHms5aVXypg"
app_1       | 2026/02/12 16:14:56 Client 1 (Conn: 02bf2f69-6f49-4c9d-beb4-d6b106d286a6) set QuizID to 39
app_1       | 2026/02/12 16:14:56 [WSHandler] User 1 set QuizID to 39
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] SubscribeToQuiz called for Client 1 (Conn: 02bf2f69-6f49-4c9d-beb4-d6b106d286a6) to Quiz 39
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] Client 1: Old QuizID is 39, New QuizID is 39
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] Client 1 already has atomic QuizID 39. Ensuring map presence.
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] Client 1: Attempting LoadOrStore for quiz map 39
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] Client 1: Created new map for quiz 39
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] Client 1: Attempting to STORE client in map for Quiz 39 (Map: 0xc00037fa70)
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] Client 1: STORED client in map for Quiz 39 (Map: 0xc00037fa70)
app_1       | 2026/02/12 16:14:56 [Shard 0][Sub] Client 1 VERIFIED in map for Quiz 39 immediately after Store.
app_1       | 2026/02/12 16:14:56 [WebSocketManager] Клиент 1 подписан на викторину 39 в шарде 0
app_1       | 2026/02/12 16:14:56 [AnswerProcessor] Пользователь #1 отметился как готовый к викторине #39
app_1       | 2026/02/12 16:14:56 [ShardedHub] Отправлено обновление player_count для викторины #39: 1 игроков
app_1       | 2026/02/12 16:14:56 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:14:56 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:player_count
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:player_count
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:player_count
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:player_count. Buffer len: 0
app_1       | 2026/02/12 16:14:56 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:14:56 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:player_count
app_1       | 
app_1       | 2026/02/12 16:14:56 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [2.130ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 2026/02/12 16:14:56 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:player_count
app_1       | 2026/02/12 16:14:56 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:14:56 [AnswerProcessor] Пользователь #1 добавлен в participants Set викторины #39
app_1       | 2026/02/12 16:14:56 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:14:56 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:user_ready
app_1       | 2026/02/12 16:14:56 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:user_ready
app_1       | 2026/02/12 16:14:56 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:user_ready
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:user_ready
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:user_ready
app_1       | 2026/02/12 16:14:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:user_ready. Buffer len: 0
app_1       | 2026/02/12 16:14:56 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:14:56 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:14:56 [AnswerProcessor] Успешно отправлено событие о готовности пользователя #1 к викторине #39 (игроков онлайн: 1)
app_1       | 
app_1       | 2026/02/12 16:15:00 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [1.453ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 2026/02/12 16:15:00 [Scheduler] Запуск обратного отсчета для викторины #39
app_1       | 2026/02/12 16:15:01 [Scheduler] Обратный отсчет викторины #39: 58 сек.
app_1       | 2026/02/12 16:15:01 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:01 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:01 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:01 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:01 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:01 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:01 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:01 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:01 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:01 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:02 [Scheduler] Обратный отсчет викторины #39: 57 сек.
app_1       | 2026/02/12 16:15:02 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:02 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:02 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:02 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:02 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:02 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:02 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:02 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:02 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:02 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:03 [Scheduler] Обратный отсчет викторины #39: 56 сек.
app_1       | 2026/02/12 16:15:03 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:03 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:03 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:03 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:03 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:03 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:03 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:03 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:03 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:03 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:04 [Scheduler] Обратный отсчет викторины #39: 55 сек.
app_1       | 2026/02/12 16:15:04 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:04 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:04 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:04 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:04 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:04 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:04 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:04 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:04 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:04 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:05 [Scheduler] Обратный отсчет викторины #39: 54 сек.
app_1       | 2026/02/12 16:15:05 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:05 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:05 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:05 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:05 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:05 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:05 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:05 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:06 [Scheduler] Обратный отсчет викторины #39: 53 сек.
app_1       | 2026/02/12 16:15:06 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:06 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:06 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:06 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:06 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:06 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:06 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:06 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:06 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:06 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:07 [Scheduler] Обратный отсчет викторины #39: 52 сек.
app_1       | 2026/02/12 16:15:07 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:07 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:07 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:07 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:07 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:07 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:07 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:07 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:07 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:07 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:08 [Scheduler] Обратный отсчет викторины #39: 51 сек.
app_1       | 2026/02/12 16:15:08 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:08 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:08 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:08 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:08 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:08 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:08 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:08 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:08 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:08 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:09 [Scheduler] Обратный отсчет викторины #39: 50 сек.
app_1       | 2026/02/12 16:15:09 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:09 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:09 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:09 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:09 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:09 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:09 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:09 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:10 [Scheduler] Обратный отсчет викторины #39: 49 сек.
app_1       | 2026/02/12 16:15:10 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:10 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:10 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:10 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:10 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:10 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:10 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:10 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:10 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:10 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:11 [Scheduler] Обратный отсчет викторины #39: 48 сек.
app_1       | 2026/02/12 16:15:11 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:11 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:11 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:11 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:11 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:11 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:11 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:11 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:11 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:11 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:12 [Scheduler] Обратный отсчет викторины #39: 47 сек.
app_1       | 2026/02/12 16:15:12 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:12 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:12 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:12 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:12 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:12 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:12 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:12 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:12 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:12 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:13 [Scheduler] Обратный отсчет викторины #39: 46 сек.
app_1       | 2026/02/12 16:15:13 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:13 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:13 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:13 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:13 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:13 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:13 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:13 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:13 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:13 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:14 [Scheduler] Обратный отсчет викторины #39: 45 сек.
app_1       | 2026/02/12 16:15:14 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:14 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:14 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:14 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:14 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:14 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:14 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:14 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:14 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:14 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:15 [Scheduler] Обратный отсчет викторины #39: 44 сек.
app_1       | 2026/02/12 16:15:15 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:15 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:15 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:15 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:15 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:15 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:15 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:15 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:15 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:15 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:16 [Scheduler] Обратный отсчет викторины #39: 43 сек.
app_1       | 2026/02/12 16:15:16 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:16 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:16 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:16 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:16 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:16 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:16 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:16 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:16 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:16 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:17 [Scheduler] Обратный отсчет викторины #39: 42 сек.
app_1       | 2026/02/12 16:15:17 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:17 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:17 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:17 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:17 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:17 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:17 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:17 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:17 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:17 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:18 [Scheduler] Обратный отсчет викторины #39: 41 сек.
app_1       | 2026/02/12 16:15:18 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:18 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:18 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:18 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:18 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:18 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:18 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:18 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:18 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:18 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:19 [Scheduler] Обратный отсчет викторины #39: 40 сек.
app_1       | 2026/02/12 16:15:19 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:19 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:19 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:19 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:19 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:19 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:19 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:19 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:19 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:19 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:20 [Scheduler] Обратный отсчет викторины #39: 39 сек.
app_1       | 2026/02/12 16:15:20 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:20 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:20 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:20 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:20 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:20 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:20 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:20 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:21 [Scheduler] Обратный отсчет викторины #39: 38 сек.
app_1       | 2026/02/12 16:15:21 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:21 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:21 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:21 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:21 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:21 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:21 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:21 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:21 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:21 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:21 [Shard 0] Запуск проверки неактивных клиентов...
app_1       | 2026/02/12 16:15:21 [Shard 3] Запуск проверки неактивных клиентов...
app_1       | 2026/02/12 16:15:21 [Shard 2] Запуск проверки неактивных клиентов...
app_1       | 2026/02/12 16:15:21 [Shard 1] Запуск проверки неактивных клиентов...
app_1       | 2026/02/12 16:15:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
app_1       | 2026/02/12 16:15:22 [Scheduler] Обратный отсчет викторины #39: 37 сек.
app_1       | 2026/02/12 16:15:22 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:22 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:22 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:22 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:22 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:22 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:22 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:22 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:22 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:22 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:23 [Scheduler] Обратный отсчет викторины #39: 36 сек.
app_1       | 2026/02/12 16:15:23 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:23 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:23 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:23 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:23 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:23 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:23 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:23 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:23 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:23 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:24 [Scheduler] Обратный отсчет викторины #39: 35 сек.
app_1       | 2026/02/12 16:15:24 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:24 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:24 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:24 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:24 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:24 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:24 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:24 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:24 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:24 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:25 [Scheduler] Обратный отсчет викторины #39: 34 сек.
app_1       | 2026/02/12 16:15:25 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:25 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:25 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:25 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:25 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:25 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:25 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:25 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:26 [Scheduler] Обратный отсчет викторины #39: 33 сек.
app_1       | 2026/02/12 16:15:26 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:26 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:26 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:26 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:26 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:26 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:26 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:26 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:26 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:26 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:27 [Scheduler] Обратный отсчет викторины #39: 32 сек.
app_1       | 2026/02/12 16:15:27 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:27 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:27 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:27 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:27 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:27 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:27 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:27 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:27 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:27 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:28 [Scheduler] Обратный отсчет викторины #39: 31 сек.
app_1       | 2026/02/12 16:15:28 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:28 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:28 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:28 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:28 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:28 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:28 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:28 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:28 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:28 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:29 [Scheduler] Обратный отсчет викторины #39: 30 сек.
app_1       | 2026/02/12 16:15:29 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:29 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:29 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:29 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:29 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:29 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:29 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:29 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:30 [Scheduler] Обратный отсчет викторины #39: 29 сек.
app_1       | 2026/02/12 16:15:30 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:30 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:30 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:30 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:30 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:30 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:30 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:30 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:30 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:30 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:31 [Scheduler] Обратный отсчет викторины #39: 28 сек.
app_1       | 2026/02/12 16:15:31 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:31 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:31 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:31 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:31 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:31 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:31 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:31 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:31 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:31 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:32 [Scheduler] Обратный отсчет викторины #39: 27 сек.
app_1       | 2026/02/12 16:15:32 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:32 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:32 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:32 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:32 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:32 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:32 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:32 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:33 [Scheduler] Обратный отсчет викторины #39: 26 сек.
app_1       | 2026/02/12 16:15:33 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:33 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:33 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:33 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:33 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:33 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:33 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:33 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:33 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:33 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:34 [Scheduler] Обратный отсчет викторины #39: 25 сек.
app_1       | 2026/02/12 16:15:34 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:34 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:34 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:34 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:34 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:34 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:34 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:34 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:34 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:34 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:35 [Scheduler] Обратный отсчет викторины #39: 24 сек.
app_1       | 2026/02/12 16:15:35 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:35 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:35 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:35 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:35 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:35 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:35 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:35 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:35 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:35 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:36 [Scheduler] Обратный отсчет викторины #39: 23 сек.
app_1       | 2026/02/12 16:15:36 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:36 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:36 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:36 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:36 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:36 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:36 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:36 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:36 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:36 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:37 [Scheduler] Обратный отсчет викторины #39: 22 сек.
app_1       | 2026/02/12 16:15:37 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:37 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:37 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:37 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:37 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:37 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:37 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:37 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:37 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:37 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:38 [Scheduler] Обратный отсчет викторины #39: 21 сек.
app_1       | 2026/02/12 16:15:38 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:38 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:38 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:38 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:38 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:38 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:38 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:38 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:38 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:38 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:39 [Scheduler] Обратный отсчет викторины #39: 20 сек.
app_1       | 2026/02/12 16:15:39 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:39 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:39 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:39 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:39 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:39 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:39 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:39 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:40 [Scheduler] Обратный отсчет викторины #39: 19 сек.
app_1       | 2026/02/12 16:15:40 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:40 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:40 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:40 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:40 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:40 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:40 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:40 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:40 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:40 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:41 [Scheduler] Обратный отсчет викторины #39: 18 сек.
app_1       | 2026/02/12 16:15:41 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:41 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:41 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:41 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:41 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:41 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:41 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:41 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:41 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:41 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:42 [Scheduler] Обратный отсчет викторины #39: 17 сек.
app_1       | 2026/02/12 16:15:42 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:42 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:42 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:42 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:42 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:42 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:42 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:42 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:42 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:42 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:43 [Scheduler] Обратный отсчет викторины #39: 16 сек.
app_1       | 2026/02/12 16:15:43 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:43 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:43 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:43 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:43 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:43 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:43 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:43 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:44 [Scheduler] Обратный отсчет викторины #39: 15 сек.
app_1       | 2026/02/12 16:15:44 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:44 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:44 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:44 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:44 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:44 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:44 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:44 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:44 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:44 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:45 [Scheduler] Обратный отсчет викторины #39: 14 сек.
app_1       | 2026/02/12 16:15:45 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:45 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:45 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:45 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:45 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:45 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:45 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:45 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:45 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:45 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:46 [Scheduler] Обратный отсчет викторины #39: 13 сек.
app_1       | 2026/02/12 16:15:46 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:46 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:46 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:46 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:46 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:46 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:46 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:46 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:46 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:46 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:47 [Scheduler] Обратный отсчет викторины #39: 12 сек.
app_1       | 2026/02/12 16:15:47 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:47 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:47 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:47 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:47 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:47 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:47 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:47 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:47 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:47 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:48 [Scheduler] Обратный отсчет викторины #39: 11 сек.
app_1       | 2026/02/12 16:15:48 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:48 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:48 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:48 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:48 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:48 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:48 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:48 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:48 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:48 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:49 [Scheduler] Обратный отсчет викторины #39: 10 сек.
app_1       | 2026/02/12 16:15:49 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:49 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:49 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:49 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:49 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:49 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:49 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:49 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:49 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:49 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:50 [Scheduler] Обратный отсчет викторины #39: 9 сек.
app_1       | 2026/02/12 16:15:50 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:50 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:50 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:50 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:50 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:50 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:50 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:50 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:51 [Scheduler] Обратный отсчет викторины #39: 8 сек.
app_1       | 2026/02/12 16:15:51 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:51 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:51 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:51 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:51 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:51 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:51 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:51 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:51 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:51 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:52 [Scheduler] Обратный отсчет викторины #39: 7 сек.
app_1       | 2026/02/12 16:15:52 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:52 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:52 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:52 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:52 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:52 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:52 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:52 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:52 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:52 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:53 [Scheduler] Обратный отсчет викторины #39: 6 сек.
app_1       | 2026/02/12 16:15:53 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:53 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:53 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:53 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:53 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:53 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:53 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:53 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:53 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:53 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:54 [Scheduler] Обратный отсчет викторины #39: 5 сек.
app_1       | 2026/02/12 16:15:54 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:54 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:54 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:54 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:54 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:54 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:54 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:54 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:54 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:54 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:55 [Scheduler] Обратный отсчет викторины #39: 4 сек.
app_1       | 2026/02/12 16:15:55 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:55 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:55 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:55 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:55 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:55 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:55 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:55 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:55 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:55 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:56 [Scheduler] Обратный отсчет викторины #39: 3 сек.
app_1       | 2026/02/12 16:15:56 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:56 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:56 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:56 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:56 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:56 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:56 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:56 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:57 [Scheduler] Обратный отсчет викторины #39: 2 сек.
app_1       | 2026/02/12 16:15:57 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:57 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:57 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:57 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:57 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:57 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:57 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:57 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:57 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:57 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:58 [Scheduler] Обратный отсчет викторины #39: 1 сек.
app_1       | 2026/02/12 16:15:58 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:58 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:58 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:58 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:58 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:countdown
app_1       | 2026/02/12 16:15:58 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:countdown. Buffer len: 0
app_1       | 2026/02/12 16:15:58 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:58 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:58 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:countdown
app_1       | 2026/02/12 16:15:58 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:59 [Scheduler] Обратный отсчет завершен для викторины #39, запуск викторины
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [1.592ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 2026/02/12 16:15:59 [Scheduler] Запуск викторины #39
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/quiz_repo.go:130
app_1       | [4.677ms] [rows:1] UPDATE "quizzes" SET "status"='in_progress',"updated_at"='2026-02-12 16:15:59.005' WHERE id = 39 AND status = 'scheduled'
app_1       | 2026/02/12 16:15:59 [Scheduler] Викторина #39: QuestionCount=10 зафиксирован
app_1       | 2026/02/12 16:15:59 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:59 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:start
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:start
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/quiz_repo.go:95
app_1       | [2.499ms] [rows:1] UPDATE "quizzes" SET "question_count"=10,"updated_at"='2026-02-12 16:15:59.009' WHERE id = 39
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:start
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:start. Buffer len: 0
app_1       | 2026/02/12 16:15:59 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:59 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:start
app_1       | 2026/02/12 16:15:59 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:start
app_1       | 2026/02/12 16:15:59 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:59 [Scheduler] Уведомление о запуске викторины #39 отправлено
app_1       | 2026/02/12 16:15:59 [Scheduler] Сигнал о запуске викторины #39 отправлен в QuizManager
app_1       | 2026/02/12 16:15:59 [QuizManager] Обработка запуска викторины #39
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [1.195ms] [rows:0] SELECT * FROM "questions" WHERE "questions"."quiz_id" = 39
app_1       | 2026/02/12 16:15:59 [QuizManager] Quiz #39: no preset questions, using adaptive mode
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [3.323ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 2026/02/12 16:15:59 [QuestionManager] Начинаю адаптивный процесс отправки вопросов для викторины #39. Всего вопросов: 10
app_1       | 2026/02/12 16:15:59 [AdaptiveSelector] Quiz #39, Q1: prev_pass_rate=1.00, target_difficulty=1
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [4.653ms] [rows:0] SELECT * FROM "questions" WHERE quiz_id = 39 AND difficulty = 1 AND is_used = false ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:15:59 [AdaptiveSelector] Found pool question ID=253 (difficulty=1)
app_1       | 2026/02/12 16:15:59 [AdaptiveSelector] Selected question ID=253, difficulty=1 for Q1
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/question_repo.go:174
app_1       | [3.292ms] [rows:1] SELECT * FROM "questions" WHERE quiz_id IS NULL AND difficulty = 1 AND is_used = false ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/question_repo.go:254
app_1       | [11.723ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,253,1) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=253 RETURNING "asked_at","id"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:15:59 +0000] "GET /quiz/39/play?_rsc=43d9o HTTP/2.0" 200 1220 "https://qazaquiz.duckdns.org/quiz/39/lobby" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
app_1       | 2026/02/12 16:15:59 [WSHandler] Resync запрос от пользователя 1 для викторины 39
app_1       | 
app_1       | 2026/02/12 16:15:59 /app/internal/repository/postgres/result_repo.go:33
app_1       | [7.011ms] [rows:0] SELECT * FROM "user_answers" WHERE user_id = 1 AND quiz_id = 39 ORDER BY created_at
app_1       | 2026/02/12 16:15:59 [WSHandler] Успешно отправлен resync для пользователя 1, quiz 39
app_1       | 2026/02/12 16:15:59 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:15:59 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:15:59 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:15:59 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:15:59 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:15:59 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:15:59 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:15:59 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:15:59 [QuestionManager][DEBUG] Викторина #39, Вопрос #253: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:16:00 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:00 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:00 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:00 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:00 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:00 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:00 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:00 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:00 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:00 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:00 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:16:01 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:01 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:01 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:01 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:01 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:01 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:01 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:01 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:01 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:01 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:01 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:16:02 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:02 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:02 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:02 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:02 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:02 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:02 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:02 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:02 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:02 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:02 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:16:03 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:03 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:03 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:03 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:03 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:03 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:03 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:03 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:03 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:03 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:03 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:16:04 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:04 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:04 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:04 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:04 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:04 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:04 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:04 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:04 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:04 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:04 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:16:05 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:05 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:05 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:05 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:05 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:05 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:05 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:05 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:05 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:16:05 [AnswerProcessor] Обработка ответа пользователя #1 на вопрос #253 (викторина #39), выбранный вариант: 2
app_1       | 
app_1       | 2026/02/12 16:16:05 /app/internal/repository/postgres/result_repo.go:25
app_1       | [6.416ms] [rows:1] INSERT INTO "user_answers" ("user_id","quiz_id","question_id","selected_option","is_correct","response_time_ms","score","is_eliminated","elimination_reason","created_at") VALUES (1,39,253,2,true,6193,1,false,'','2026-02-12 16:16:05.731') RETURNING "id"
app_1       | 2026/02/12 16:16:05 [AnswerProcessor] Ответ User #1 на Q #253 успешно сохранен в БД.
app_1       | 2026/02/12 16:16:05 [AnswerProcessor] Успешно обработан и отправлен результат для User #1 на Q #253 (Quiz #39). Выбыл: false
app_1       | 2026/02/12 16:16:06 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:06 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:06 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:06 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:06 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:06 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:06 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:06 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:06 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:06 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:06 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:16:07 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:07 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:07 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:07 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:07 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:07 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:07 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:07 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:07 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:07 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:07 [QuestionManager] Таймер вопроса #253 (1 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:16:08 [QuestionManager] Время на вопрос #253 (1 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:16:09 [QuestionManager] Викторина #39, Вопрос #253 (1 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:16:09 [QuestionManager][DEBUG] Викторина #39, Вопрос #253: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:16:09 [QuestionManager][DEBUG] Викторина #39, Вопрос #253: SMembers вернул 1 участников
app_1       | 2026/02/12 16:16:09 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:09 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:16:09 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:09 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:09 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:09 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:09 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:09 [QuestionManager] adaptive:question_stats отправлен для Q1: pass_rate=1.00, target=0.90
app_1       | 2026/02/12 16:16:09 [QuestionManager][DEBUG] Викторина #39, Вопрос #253: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:16:09 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:09 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:09 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:09 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:16:09 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:09 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:09 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 
app_1       | 2026/02/12 16:16:09 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [11.100ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 1 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:16:09 [QuestionManager] Пауза 500ms между вопросами 1 и 2
app_1       | 2026/02/12 16:16:10 [AdaptiveSelector] Quiz #39, Q2: prev_pass_rate=1.00, target_difficulty=2
app_1       | 
app_1       | 2026/02/12 16:16:10 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [3.329ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 2 AND is_used = false) AND id NOT IN (253) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:16:10 /app/internal/repository/postgres/question_repo.go:174
app_1       | [3.146ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 2 AND is_used = false) AND id NOT IN (253) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:16:10 [AdaptiveSelector] Found pool question ID=313 (difficulty=2)
app_1       | 2026/02/12 16:16:10 [AdaptiveSelector] Selected question ID=313, difficulty=2 for Q2
app_1       | 
app_1       | 2026/02/12 16:16:10 /app/internal/repository/postgres/question_repo.go:254
app_1       | [3.658ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,313,2) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=313 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:16:10 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:10 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:10 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:10 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:10 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:16:10 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:16:10 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:10 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:10 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:10 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:10 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:10 [QuestionManager][DEBUG] Викторина #39, Вопрос #313: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:16:11 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:11 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:11 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:11 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:11 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:11 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:11 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:11 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:11 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:11 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:11 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:16:12 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:12 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:12 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:12 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:12 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:12 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:12 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:12 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:12 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:12 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:12 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:16:13 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:13 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:13 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:13 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:13 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:13 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:13 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:13 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:13 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:13 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:13 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:16:14 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:14 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:14 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:14 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:14 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:14 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:14 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:14 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:14 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:14 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:14 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:16:15 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:15 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:15 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:15 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:15 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:15 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:15 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:15 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:15 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:15 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:15 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:16:16 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:16 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:16 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:16 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:16 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:16 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:16 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:16 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:16 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:16 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:16 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:16:17 [AnswerProcessor] Обработка ответа пользователя #1 на вопрос #313 (викторина #39), выбранный вариант: 1
app_1       | 
app_1       | 2026/02/12 16:16:17 /app/internal/repository/postgres/result_repo.go:25
app_1       | [3.225ms] [rows:1] INSERT INTO "user_answers" ("user_id","quiz_id","question_id","selected_option","is_correct","response_time_ms","score","is_eliminated","elimination_reason","created_at") VALUES (1,39,313,1,true,6435,1,false,'','2026-02-12 16:16:17.202') RETURNING "id"
app_1       | 2026/02/12 16:16:17 [AnswerProcessor] Ответ User #1 на Q #313 успешно сохранен в БД.
app_1       | 2026/02/12 16:16:17 [AnswerProcessor] Успешно обработан и отправлен результат для User #1 на Q #313 (Quiz #39). Выбыл: false
app_1       | 2026/02/12 16:16:17 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:17 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:17 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:17 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:17 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:17 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:17 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:17 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:17 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:17 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:17 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:16:18 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:18 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:18 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:18 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:18 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:18 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:18 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:18 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:18 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:18 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:18 [QuestionManager] Таймер вопроса #313 (2 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:16:19 [QuestionManager] Время на вопрос #313 (2 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:16:20 [QuestionManager] Викторина #39, Вопрос #313 (2 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:16:20 [QuestionManager][DEBUG] Викторина #39, Вопрос #313: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:16:20 [QuestionManager][DEBUG] Викторина #39, Вопрос #313: SMembers вернул 1 участников
app_1       | 2026/02/12 16:16:20 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:20 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:16:20 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:20 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:20 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:20 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:20 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:20 [QuestionManager] adaptive:question_stats отправлен для Q2: pass_rate=1.00, target=0.85
app_1       | 2026/02/12 16:16:20 [QuestionManager][DEBUG] Викторина #39, Вопрос #313: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:16:20 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:20 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:16:20 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:20 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:20 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:20 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:20 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:20 [QuestionManager] Пауза 500ms между вопросами 2 и 3
app_1       | 
app_1       | 2026/02/12 16:16:20 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [2.178ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 2 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:16:21 [AdaptiveSelector] Quiz #39, Q3: prev_pass_rate=1.00, target_difficulty=3
app_1       | 
app_1       | 2026/02/12 16:16:21 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [4.585ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 3 AND is_used = false) AND id NOT IN (253,313) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:16:21 [AdaptiveSelector] Found pool question ID=357 (difficulty=3)
app_1       | 2026/02/12 16:16:21 [AdaptiveSelector] Selected question ID=357, difficulty=3 for Q3
app_1       | 
app_1       | 2026/02/12 16:16:21 /app/internal/repository/postgres/question_repo.go:174
app_1       | [8.673ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 3 AND is_used = false) AND id NOT IN (253,313) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:16:21 /app/internal/repository/postgres/question_repo.go:254
app_1       | [5.223ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,357,3) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=357 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:16:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
app_1       | 2026/02/12 16:16:21 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:21 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:21 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:21 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:21 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:21 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:21 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:16:21 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:16:21 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:21 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:21 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:21 [QuestionManager][DEBUG] Викторина #39, Вопрос #357: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:16:22 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:22 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:22 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:22 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:22 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:22 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:22 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:22 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:22 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:22 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:22 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:16:23 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:23 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:23 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:23 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:23 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:23 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:23 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:23 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:24 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:24 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:24 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:16:25 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:25 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:25 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:25 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:25 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:25 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:16:25 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:25 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:25 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:25 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:25 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:25 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:16:27 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:27 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:27 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:27 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:27 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:16:27 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:27 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:27 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:27 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:27 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:27 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:16:29 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:29 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:29 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:29 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:29 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:29 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:16:29 [AnswerProcessor] Обработка ответа пользователя #1 на вопрос #357 (викторина #39), выбранный вариант: 2
app_1       | 
app_1       | 2026/02/12 16:16:29 /app/internal/repository/postgres/result_repo.go:25
app_1       | [4.570ms] [rows:1] INSERT INTO "user_answers" ("user_id","quiz_id","question_id","selected_option","is_correct","response_time_ms","score","is_eliminated","elimination_reason","created_at") VALUES (1,39,357,2,true,7160,1,false,'','2026-02-12 16:16:29.158') RETURNING "id"
app_1       | 2026/02/12 16:16:29 [AnswerProcessor] Ответ User #1 на Q #357 успешно сохранен в БД.
app_1       | 2026/02/12 16:16:29 [AnswerProcessor] Успешно обработан и отправлен результат для User #1 на Q #357 (Quiz #39). Выбыл: false
app_1       | 2026/02/12 16:16:29 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:29 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:29 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:29 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:29 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:30 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:30 [QuestionManager] Таймер вопроса #357 (3 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:16:30 [QuestionManager] Время на вопрос #357 (3 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:16:31 [QuestionManager] Викторина #39, Вопрос #357 (3 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:16:31 [QuestionManager][DEBUG] Викторина #39, Вопрос #357: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:16:31 [QuestionManager][DEBUG] Викторина #39, Вопрос #357: SMembers вернул 1 участников
app_1       | 2026/02/12 16:16:32 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:32 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:32 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:32 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:16:32 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:32 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:32 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:32 [QuestionManager] adaptive:question_stats отправлен для Q3: pass_rate=1.00, target=0.78
app_1       | 2026/02/12 16:16:32 [QuestionManager][DEBUG] Викторина #39, Вопрос #357: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:16:32 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:32 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:32 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:32 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:16:32 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:32 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:32 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:32 [QuestionManager] Пауза 500ms между вопросами 3 и 4
app_1       | 
app_1       | 2026/02/12 16:16:32 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [2.723ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 3 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:16:32 [AdaptiveSelector] Quiz #39, Q4: prev_pass_rate=1.00, target_difficulty=4
app_1       | 
app_1       | 2026/02/12 16:16:32 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [2.188ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 4 AND is_used = false) AND id NOT IN (253,313,357) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:16:32 [AdaptiveSelector] Found pool question ID=409 (difficulty=4)
app_1       | 2026/02/12 16:16:32 [AdaptiveSelector] Selected question ID=409, difficulty=4 for Q4
app_1       | 
app_1       | 2026/02/12 16:16:32 /app/internal/repository/postgres/question_repo.go:174
app_1       | [2.344ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 4 AND is_used = false) AND id NOT IN (253,313,357) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:16:32 /app/internal/repository/postgres/question_repo.go:254
app_1       | [3.739ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,409,4) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=409 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:16:33 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:33 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:33 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:33 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:33 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:33 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:33 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:16:33 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:16:33 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:33 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:33 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:33 [QuestionManager][DEBUG] Викторина #39, Вопрос #409: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:16:34 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:34 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:34 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:34 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:34 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:34 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:34 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:34 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:34 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:34 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:34 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:16:35 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:35 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:35 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:35 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:35 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:35 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:35 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:35 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:35 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:35 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:35 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:16:36 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:36 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:36 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:36 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:36 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:36 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:36 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:36 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:36 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:36 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:36 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:16:37 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:37 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:37 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:37 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:37 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:37 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:37 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:37 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:37 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:37 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:37 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:16:38 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:38 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:38 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:38 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:38 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:38 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:38 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:38 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:38 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:38 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:38 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:16:39 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:39 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:39 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:39 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:39 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:39 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:39 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:39 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:39 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:16:40 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:40 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:40 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:40 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:40 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:40 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:40 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:40 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:40 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:40 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:40 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:16:41 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:41 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:41 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:41 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:41 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:41 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:41 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:41 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:41 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:41 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:41 [QuestionManager] Таймер вопроса #409 (4 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:16:42 [QuestionManager] Время на вопрос #409 (4 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:16:43 [QuestionManager] Викторина #39, Вопрос #409 (4 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:16:43 [QuestionManager][DEBUG] Викторина #39, Вопрос #409: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:16:43 [QuestionManager][DEBUG] Викторина #39, Вопрос #409: SMembers вернул 1 участников
app_1       | 2026/02/12 16:16:43 [QuestionManager] Пользователь #1 выбывает из викторины #39. Причина: no_answer_timeout (Вопрос #409).
app_1       | 
app_1       | 2026/02/12 16:16:43 /app/internal/repository/postgres/result_repo.go:25
app_1       | [3.593ms] [rows:1] INSERT INTO "user_answers" ("user_id","quiz_id","question_id","selected_option","is_correct","response_time_ms","score","is_eliminated","elimination_reason","created_at") VALUES (1,39,409,-1,false,0,0,true,'no_answer_timeout','2026-02-12 16:16:43.223') RETURNING "id"
app_1       | 2026/02/12 16:16:43 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:43 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:16:43 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:43 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:43 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:43 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:43 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:43 [QuestionManager] adaptive:question_stats отправлен для Q4: pass_rate=0.00, target=0.70
app_1       | 2026/02/12 16:16:43 [QuestionManager][DEBUG] Викторина #39, Вопрос #409: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:16:43 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:43 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:43 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:43 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:16:43 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:43 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:43 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 
app_1       | 2026/02/12 16:16:43 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [2.308ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 4 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:16:43 [QuestionManager] Пауза 500ms между вопросами 4 и 5
app_1       | 2026/02/12 16:16:43 [AdaptiveSelector] Quiz #39, Q5: prev_pass_rate=0.00, target_difficulty=2
app_1       | 
app_1       | 2026/02/12 16:16:43 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [2.208ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 2 AND is_used = false) AND id NOT IN (253,313,357,409) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:16:43 /app/internal/repository/postgres/question_repo.go:174
app_1       | [2.360ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 2 AND is_used = false) AND id NOT IN (253,313,357,409) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:16:43 [AdaptiveSelector] Found pool question ID=309 (difficulty=2)
app_1       | 2026/02/12 16:16:43 [AdaptiveSelector] Selected question ID=309, difficulty=2 for Q5
app_1       | 
app_1       | 2026/02/12 16:16:43 /app/internal/repository/postgres/question_repo.go:254
app_1       | [3.818ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,309,5) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=309 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:16:44 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:44 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:44 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:44 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:44 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:44 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:44 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:16:44 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:16:44 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:44 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:44 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:44 [QuestionManager][DEBUG] Викторина #39, Вопрос #309: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:16:45 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:45 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:45 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:45 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:45 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:45 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:45 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:45 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:45 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:45 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:45 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:16:46 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:46 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:46 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:46 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:46 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:46 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:46 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:46 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:46 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:46 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:46 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:16:47 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:47 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:47 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:47 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:47 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:47 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:47 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:47 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:47 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:47 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:47 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:16:48 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:48 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:48 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:48 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:48 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:48 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:48 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:48 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:48 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:48 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:48 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:16:49 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:49 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:49 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:49 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:49 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:49 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:49 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:49 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:49 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:49 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:49 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:16:50 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:50 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:50 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:50 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:50 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:50 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:50 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:50 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:50 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:16:51 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:51 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:51 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:51 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:51 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:51 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:51 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:51 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:51 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:51 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:51 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:16:52 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:52 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:52 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:52 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:52 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:52 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:52 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:52 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:52 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:52 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:52 [QuestionManager] Таймер вопроса #309 (5 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:16:53 [QuestionManager] Время на вопрос #309 (5 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:16:54 [QuestionManager] Викторина #39, Вопрос #309 (5 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:16:54 [QuestionManager][DEBUG] Викторина #39, Вопрос #309: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:16:54 [QuestionManager][DEBUG] Викторина #39, Вопрос #309: SMembers вернул 1 участников
app_1       | 2026/02/12 16:16:54 [QuestionManager][DEBUG] Викторина #39, Вопрос #309: User #1 не ответил, но УЖЕ был выбывший.
app_1       | 2026/02/12 16:16:54 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:54 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:16:54 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:54 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:54 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:16:54 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:54 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:54 [QuestionManager] adaptive:question_stats отправлен для Q5: pass_rate=0.00, target=0.62
app_1       | 2026/02/12 16:16:54 [QuestionManager][DEBUG] Викторина #39, Вопрос #309: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:16:54 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:54 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:54 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:16:54 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:54 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:54 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:16:54 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:54 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 
app_1       | 2026/02/12 16:16:54 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [1.560ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 5 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:16:54 [QuestionManager] Пауза 500ms между вопросами 5 и 6
app_1       | 2026/02/12 16:16:55 [AdaptiveSelector] Quiz #39, Q6: prev_pass_rate=-1.00, target_difficulty=4
app_1       | 
app_1       | 2026/02/12 16:16:55 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [2.623ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 4 AND is_used = false) AND id NOT IN (253,313,357,409,309) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:16:55 /app/internal/repository/postgres/question_repo.go:174
app_1       | [4.825ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 4 AND is_used = false) AND id NOT IN (253,313,357,409,309) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:16:55 [AdaptiveSelector] Found pool question ID=579 (difficulty=4)
app_1       | 2026/02/12 16:16:55 [AdaptiveSelector] Selected question ID=579, difficulty=4 for Q6
app_1       | 
app_1       | 2026/02/12 16:16:55 /app/internal/repository/postgres/question_repo.go:254
app_1       | [5.792ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,579,6) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=579 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:16:55 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:55 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:55 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:55 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:55 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:16:55 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:16:55 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:55 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:55 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:16:55 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:55 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:16:55 [QuestionManager][DEBUG] Викторина #39, Вопрос #579: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:16:56 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:56 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:56 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:56 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:56 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:56 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:56 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:56 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:56 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:56 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:16:57 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:57 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:57 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:57 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:57 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:57 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:57 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:57 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:57 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:57 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:57 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:16:58 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:58 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:58 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:58 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:58 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:58 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:58 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:58 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:58 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:58 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:58 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:16:59 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:16:59 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:59 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:59 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:16:59 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:16:59 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:16:59 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:16:59 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:59 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:16:59 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:16:59 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:17:00 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:00 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:00 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:00 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:00 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:00 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:00 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:00 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:00 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:00 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:00 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:17:01 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:01 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:01 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:01 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:01 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:01 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:01 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:01 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:01 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:01 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:01 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:17:02 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:02 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:02 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:02 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:02 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:02 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:02 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:02 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:02 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:02 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:02 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:17:03 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:03 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:03 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:03 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:03 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:03 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:03 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:03 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:03 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:03 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:03 [QuestionManager] Таймер вопроса #579 (6 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:17:04 [QuestionManager] Время на вопрос #579 (6 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:17:05 [QuestionManager] Викторина #39, Вопрос #579 (6 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:17:05 [QuestionManager][DEBUG] Викторина #39, Вопрос #579: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:17:05 [QuestionManager][DEBUG] Викторина #39, Вопрос #579: SMembers вернул 1 участников
app_1       | 2026/02/12 16:17:05 [QuestionManager][DEBUG] Викторина #39, Вопрос #579: User #1 не ответил, но УЖЕ был выбывший.
app_1       | 2026/02/12 16:17:05 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:05 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:17:05 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:05 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:05 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:05 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:05 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:05 [QuestionManager] adaptive:question_stats отправлен для Q6: pass_rate=0.00, target=0.55
app_1       | 2026/02/12 16:17:05 [QuestionManager][DEBUG] Викторина #39, Вопрос #579: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:17:05 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:05 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:05 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:17:05 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:05 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:05 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:05 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:05 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 
app_1       | 2026/02/12 16:17:05 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [2.541ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 6 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:17:05 [QuestionManager] Пауза 500ms между вопросами 6 и 7
app_1       | 2026/02/12 16:17:06 [AdaptiveSelector] Quiz #39, Q7: prev_pass_rate=-1.00, target_difficulty=4
app_1       | 
app_1       | 2026/02/12 16:17:06 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [1.948ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 4 AND is_used = false) AND id NOT IN (253,313,357,409,309,579) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:17:06 [AdaptiveSelector] Found pool question ID=421 (difficulty=4)
app_1       | 2026/02/12 16:17:06 [AdaptiveSelector] Selected question ID=421, difficulty=4 for Q7
app_1       | 
app_1       | 2026/02/12 16:17:06 /app/internal/repository/postgres/question_repo.go:174
app_1       | [3.623ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 4 AND is_used = false) AND id NOT IN (253,313,357,409,309,579) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:17:06 /app/internal/repository/postgres/question_repo.go:254
app_1       | [3.481ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,421,7) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=421 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:17:06 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:06 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:06 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:06 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:06 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:17:06 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:17:06 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:06 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:06 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:06 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:06 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:06 [QuestionManager][DEBUG] Викторина #39, Вопрос #421: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:17:07 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:07 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:07 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:07 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:07 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:07 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:07 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:07 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:07 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:07 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:07 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:17:08 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:08 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:08 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:08 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:08 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:08 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:08 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:08 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:08 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:08 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:08 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:17:09 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:09 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:09 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:09 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:09 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:09 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:09 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:09 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:09 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:09 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:17:10 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:10 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:10 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:10 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:10 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:10 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:10 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:10 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:10 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:10 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:10 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:17:11 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:11 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:11 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:11 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:11 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:11 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:11 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:11 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:11 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:11 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:11 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:17:12 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:12 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:12 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:12 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:12 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:12 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:12 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:12 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:12 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:12 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:12 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:17:13 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:13 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:13 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:13 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:13 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:13 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:13 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:13 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:13 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:13 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:13 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:17:14 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:14 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:14 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:14 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:14 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:14 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:14 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:14 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:14 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:14 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:14 [QuestionManager] Таймер вопроса #421 (7 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:17:15 [QuestionManager] Время на вопрос #421 (7 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:17:16 [QuestionManager] Викторина #39, Вопрос #421 (7 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:17:16 [QuestionManager][DEBUG] Викторина #39, Вопрос #421: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:17:16 [QuestionManager][DEBUG] Викторина #39, Вопрос #421: SMembers вернул 1 участников
app_1       | 2026/02/12 16:17:16 [QuestionManager][DEBUG] Викторина #39, Вопрос #421: User #1 не ответил, но УЖЕ был выбывший.
app_1       | 2026/02/12 16:17:16 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:16 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:16 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:16 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:16 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:16 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:16 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:16 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:17:16 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:16 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:16 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:16 [QuestionManager] adaptive:question_stats отправлен для Q7: pass_rate=0.00, target=0.48
app_1       | 2026/02/12 16:17:17 [QuestionManager][DEBUG] Викторина #39, Вопрос #421: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:17:17 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:17 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:17 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:17 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:17 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:17 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:17 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:17 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:17:17 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:17 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:17 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:17 [QuestionManager] Пауза 500ms между вопросами 7 и 8
app_1       | 
app_1       | 2026/02/12 16:17:17 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [2.840ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 7 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:17:17 [AdaptiveSelector] Quiz #39, Q8: prev_pass_rate=-1.00, target_difficulty=5
app_1       | 
app_1       | 2026/02/12 16:17:17 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [2.309ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 5 AND is_used = false) AND id NOT IN (253,313,357,409,309,579,421) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:17:17 [AdaptiveSelector] Found pool question ID=498 (difficulty=5)
app_1       | 2026/02/12 16:17:17 [AdaptiveSelector] Selected question ID=498, difficulty=5 for Q8
app_1       | 
app_1       | 2026/02/12 16:17:17 /app/internal/repository/postgres/question_repo.go:174
app_1       | [4.718ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 5 AND is_used = false) AND id NOT IN (253,313,357,409,309,579,421) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:17:17 /app/internal/repository/postgres/question_repo.go:254
app_1       | [4.185ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,498,8) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=498 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:17:18 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:18 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:18 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:18 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:17:18 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:17:18 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:18 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:18 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:18 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:18 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:18 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:18 [QuestionManager][DEBUG] Викторина #39, Вопрос #498: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:17:19 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:19 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:19 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:19 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:19 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:19 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:19 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:19 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:19 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:19 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:19 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:17:20 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:20 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:20 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:20 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:20 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:20 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:20 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:20 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:20 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:20 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:17:21 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:21 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:21 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:21 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:21 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:21 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:21 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:21 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:21 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:21 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:21 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:17:21 RedisPubSub: Published message to channel 'ws:metrics' (Subscribers: 1)
app_1       | 2026/02/12 16:17:22 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:22 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:22 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:22 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:22 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:22 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:22 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:22 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:22 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:22 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:22 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:17:23 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:23 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:23 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:23 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:23 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:23 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:23 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:23 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:23 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:23 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:23 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:17:24 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:24 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:24 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:24 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:24 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:24 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:24 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:24 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:24 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:24 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:24 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:17:25 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:25 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:25 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:25 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:25 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:25 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:25 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:25 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:25 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:25 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:17:26 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:26 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:26 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:26 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:26 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:26 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:26 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:26 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:26 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:26 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:26 [QuestionManager] Таймер вопроса #498 (8 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:17:27 [QuestionManager] Время на вопрос #498 (8 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:17:28 [QuestionManager] Викторина #39, Вопрос #498 (8 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:17:28 [QuestionManager][DEBUG] Викторина #39, Вопрос #498: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:17:28 [QuestionManager][DEBUG] Викторина #39, Вопрос #498: SMembers вернул 1 участников
app_1       | 2026/02/12 16:17:28 [QuestionManager][DEBUG] Викторина #39, Вопрос #498: User #1 не ответил, но УЖЕ был выбывший.
app_1       | 2026/02/12 16:17:28 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:28 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:17:28 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:28 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:28 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:28 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:28 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:28 [QuestionManager] adaptive:question_stats отправлен для Q8: pass_rate=0.00, target=0.42
app_1       | 2026/02/12 16:17:28 [QuestionManager][DEBUG] Викторина #39, Вопрос #498: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:17:28 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:28 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:28 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:28 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:28 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:17:28 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:28 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:28 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:28 [QuestionManager] Пауза 500ms между вопросами 8 и 9
app_1       | 
app_1       | 2026/02/12 16:17:28 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [2.024ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 8 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:17:28 [AdaptiveSelector] Quiz #39, Q9: prev_pass_rate=-1.00, target_difficulty=5
app_1       | 
app_1       | 2026/02/12 16:17:28 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [2.177ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 5 AND is_used = false) AND id NOT IN (253,313,357,409,309,579,421,498) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:17:28 /app/internal/repository/postgres/question_repo.go:174
app_1       | [2.084ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 5 AND is_used = false) AND id NOT IN (253,313,357,409,309,579,421,498) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:17:28 [AdaptiveSelector] Found pool question ID=549 (difficulty=5)
app_1       | 2026/02/12 16:17:28 [AdaptiveSelector] Selected question ID=549, difficulty=5 for Q9
app_1       | 
app_1       | 2026/02/12 16:17:28 /app/internal/repository/postgres/question_repo.go:254
app_1       | [4.180ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,549,9) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=549 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:17:29 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:29 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:29 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:29 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:29 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:17:29 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:29 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:17:29 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:29 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:29 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:29 [QuestionManager][DEBUG] Викторина #39, Вопрос #549: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:17:30 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:30 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:30 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:30 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:30 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:30 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:30 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:30 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:30 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:30 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:30 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:17:31 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:31 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:31 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:31 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:31 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:31 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:31 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:31 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:31 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:31 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:31 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:17:32 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:32 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:32 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:32 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:32 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:32 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:32 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:32 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:32 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:32 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:17:33 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:33 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:33 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:33 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:33 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:33 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:33 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:33 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:33 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:33 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:33 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:17:34 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:34 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:34 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:34 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:34 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:34 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:34 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:34 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:34 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:34 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:34 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:17:35 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:35 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:35 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:35 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:35 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:35 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:35 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:35 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:35 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:35 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:35 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:17:36 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:36 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:36 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:36 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:36 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:36 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:36 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:36 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:36 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:36 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:36 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:17:37 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:37 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:37 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:37 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:37 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:37 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:37 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:37 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:37 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:37 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:37 [QuestionManager] Таймер вопроса #549 (9 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:17:38 [QuestionManager] Время на вопрос #549 (9 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:17:39 [QuestionManager] Викторина #39, Вопрос #549 (9 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:17:39 [QuestionManager][DEBUG] Викторина #39, Вопрос #549: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:17:39 [QuestionManager][DEBUG] Викторина #39, Вопрос #549: SMembers вернул 1 участников
app_1       | 2026/02/12 16:17:39 [QuestionManager][DEBUG] Викторина #39, Вопрос #549: User #1 не ответил, но УЖЕ был выбывший.
app_1       | 2026/02/12 16:17:39 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:39 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:39 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:39 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:17:39 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:39 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:39 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:39 [QuestionManager] adaptive:question_stats отправлен для Q9: pass_rate=0.00, target=0.36
app_1       | 2026/02/12 16:17:39 [QuestionManager][DEBUG] Викторина #39, Вопрос #549: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:17:39 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:39 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:39 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:17:39 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:39 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:39 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:39 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:39 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 
app_1       | 2026/02/12 16:17:39 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [3.255ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 9 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 2026/02/12 16:17:39 [QuestionManager] Пауза 500ms между вопросами 9 и 10
app_1       | 2026/02/12 16:17:40 [AdaptiveSelector] Quiz #39, Q10: prev_pass_rate=-1.00, target_difficulty=5
app_1       | 
app_1       | 2026/02/12 16:17:40 /app/internal/repository/postgres/question_repo.go:156 record not found
app_1       | [2.853ms] [rows:0] SELECT * FROM "questions" WHERE (quiz_id = 39 AND difficulty = 5 AND is_used = false) AND id NOT IN (253,313,357,409,309,579,421,498,549) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:17:40 /app/internal/repository/postgres/question_repo.go:174
app_1       | [2.353ms] [rows:1] SELECT * FROM "questions" WHERE (quiz_id IS NULL AND difficulty = 5 AND is_used = false) AND id NOT IN (253,313,357,409,309,579,421,498,549) ORDER BY RANDOM(),"questions"."id" LIMIT 1
app_1       | 2026/02/12 16:17:40 [AdaptiveSelector] Found pool question ID=535 (difficulty=5)
app_1       | 2026/02/12 16:17:40 [AdaptiveSelector] Selected question ID=535, difficulty=5 for Q10
app_1       | 
app_1       | 2026/02/12 16:17:40 /app/internal/repository/postgres/question_repo.go:254
app_1       | [3.205ms] [rows:1] INSERT INTO "quiz_question_history" ("quiz_id","question_id","question_order") VALUES (39,535,10) ON CONFLICT ("quiz_id","question_order") DO UPDATE SET "asked_at"=NOW(),"question_id"=535 RETURNING "asked_at","id"
app_1       | 2026/02/12 16:17:40 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:40 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:40 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:40 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:40 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:question
app_1       | 2026/02/12 16:17:40 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:question. Buffer len: 0
app_1       | 2026/02/12 16:17:40 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:40 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:40 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:question
app_1       | 2026/02/12 16:17:40 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:40 [QuestionManager] Событие quiz:question для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:40 [QuestionManager][DEBUG] Викторина #39, Вопрос #535: Ожидание завершения таймера (10s)...
app_1       | 2026/02/12 16:17:41 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:41 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:41 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:41 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:41 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:41 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:41 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:41 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:41 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:41 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:41 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 8 секунд
app_1       | 2026/02/12 16:17:42 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:42 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:42 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:42 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:42 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:42 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:42 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:42 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:42 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:42 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:42 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 7 секунд
app_1       | 2026/02/12 16:17:43 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:43 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:43 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:43 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:43 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:43 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:43 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:43 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:43 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:43 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 6 секунд
app_1       | 2026/02/12 16:17:44 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:44 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:44 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:44 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:44 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:44 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:44 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:44 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:44 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:44 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:44 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 5 секунд
app_1       | 2026/02/12 16:17:45 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:45 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:45 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:45 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:45 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:45 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:45 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:45 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:45 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:45 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:45 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 4 секунд
app_1       | 2026/02/12 16:17:46 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:46 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:46 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:46 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:46 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:46 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:46 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:46 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:46 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:46 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:46 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 3 секунд
app_1       | 2026/02/12 16:17:47 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:47 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:47 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:47 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:47 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:47 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:47 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:47 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:47 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:47 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:47 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 2 секунд
app_1       | 2026/02/12 16:17:48 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:48 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:48 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:48 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:48 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:timer
app_1       | 2026/02/12 16:17:48 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:48 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:timer
app_1       | 2026/02/12 16:17:48 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:timer. Buffer len: 0
app_1       | 2026/02/12 16:17:48 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:48 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:48 [QuestionManager] Таймер вопроса #535 (10 из 0): осталось 1 секунд
app_1       | 2026/02/12 16:17:49 [QuestionManager] Время на вопрос #535 (10 из 0) викторины #39 истекло
app_1       | 2026/02/12 16:17:50 [QuestionManager] Викторина #39, Вопрос #535 (10 из 10): Время истекло. Начинаем проверку не ответивших.
app_1       | 2026/02/12 16:17:50 [QuestionManager][DEBUG] Викторина #39, Вопрос #535: Получение участников из Redis Set quiz:39:participants...
app_1       | 2026/02/12 16:17:50 [QuestionManager][DEBUG] Викторина #39, Вопрос #535: SMembers вернул 1 участников
app_1       | 2026/02/12 16:17:50 [QuestionManager][DEBUG] Викторина #39, Вопрос #535: User #1 не ответил, но УЖЕ был выбывший.
app_1       | 2026/02/12 16:17:50 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:50 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: adaptive:question_stats. Buffer len: 0
app_1       | 2026/02/12 16:17:50 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:50 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:50 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: adaptive:question_stats
app_1       | 2026/02/12 16:17:50 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:50 [QuestionManager] Событие adaptive:question_stats для викторины #39 успешно отправлено с 1 попытки
app_1       | 2026/02/12 16:17:50 [QuestionManager] adaptive:question_stats отправлен для Q10: pass_rate=0.00, target=0.50
app_1       | 2026/02/12 16:17:50 [QuestionManager][DEBUG] Викторина #39, Вопрос #535: Отправка события quiz:answer_reveal...
app_1       | 2026/02/12 16:17:50 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:50 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:50 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:50 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:answer_reveal
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:answer_reveal. Buffer len: 0
app_1       | 2026/02/12 16:17:50 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:50 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:50 [QuestionManager] Событие quiz:answer_reveal для викторины #39 успешно отправлено с 1 попытки
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/quiz_ad_slot_repo.go:50 record not found
app_1       | [2.169ms] [rows:0] SELECT * FROM "quiz_ad_slots" WHERE quiz_id = 39 AND question_after = 10 AND is_active = true ORDER BY "quiz_ad_slots"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/question_repo.go:136
app_1       | [10.308ms] [rows:10] UPDATE "questions" SET "is_used"=true,"updated_at"='2026-02-12 16:17:50.766' WHERE id IN (253,313,357,409,309,579,421,498,549,535)
app_1       | 2026/02/12 16:17:50 [QuestionManager] Помечено 10 вопросов как использованные
app_1       | 2026/02/12 16:17:50 [QuestionManager] Сигнал о завершении вопросов для викторины #39 отправлен
app_1       | 2026/02/12 16:17:50 [QuizManager] Завершение викторины #39
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/quiz_repo.go:87
app_1       | [5.164ms] [rows:1] UPDATE "quizzes" SET "status"='completed',"updated_at"='2026-02-12 16:17:50.777' WHERE id = 39
app_1       | 2026/02/12 16:17:50 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:50 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:finish
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:finish
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:finish
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:finish. Buffer len: 0
app_1       | 2026/02/12 16:17:50 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:50 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:finish
app_1       | 2026/02/12 16:17:50 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:finish
app_1       | 2026/02/12 16:17:50 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:50 [QuizManager] Получение списка участников из Redis Set quiz:39:participants для викторины #39...
app_1       | 2026/02/12 16:17:50 [QuizManager] Расчет и сохранение итоговых результатов для 1 участников викторины #39...
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/user_repo.go:33
app_1       | [1.798ms] [rows:1] SELECT * FROM "users" WHERE "users"."id" = 1 ORDER BY "users"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [0.917ms] [rows:0] SELECT * FROM "questions" WHERE "questions"."quiz_id" = 39
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [2.328ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/result_repo.go:33
app_1       | [4.621ms] [rows:4] SELECT * FROM "user_answers" WHERE user_id = 1 AND quiz_id = 39 ORDER BY created_at
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/service/result_service.go:128
app_1       | [9.060ms] [rows:1] INSERT INTO "results" ("user_id","quiz_id","username","profile_picture","score","correct_answers","total_questions","rank","is_winner","prize_fund","is_eliminated","completed_at","created_at","updated_at","eliminated_on_question","elimination_reason") VALUES (1,39,'Temirlan','',3,3,10,0,false,0,true,'2026-02-12 16:17:50.793','2026-02-12 16:17:50.794','2026-02-12 16:17:50.794',4,'no_answer_timeout') RETURNING "eliminated_on_question","elimination_reason","id"
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/service/result_service.go:135
app_1       | [4.602ms] [rows:1] UPDATE "users" SET "total_score"=total_score + 3,"updated_at"='2026-02-12 16:17:50.802' WHERE id = 1
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/service/result_service.go:142
app_1       | [1.259ms] [rows:0] UPDATE "users" SET "highest_score"=3,"updated_at"='2026-02-12 16:17:50.807' WHERE id = 1 AND highest_score < 3
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/service/result_service.go:148
app_1       | [1.073ms] [rows:1] UPDATE "users" SET "games_played"=games_played + 1 WHERE id = 1
app_1       | 2026/02/12 16:17:50 [ResultService] Успешно рассчитан и сохранен результат для пользователя #1 в викторине #39
app_1       | 2026/02/12 16:17:50 [QuizManager] Индивидуальные результаты для викторины #39 рассчитаны.
app_1       | 2026/02/12 16:17:50 [QuizManager] Определение победителей и распределение призов для викторины #39...
app_1       | 2026/02/12 16:17:50 [ResultService] Финализация результатов для викторины #39
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [0.945ms] [rows:0] SELECT * FROM "questions" WHERE "questions"."quiz_id" = 39
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/quiz_repo.go:73
app_1       | [3.991ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | 2026/02/12 16:17:50 [ResultService] Викторина #39: определение победителей на основе 10 вопросов
app_1       | 2026/02/12 16:17:50 [ResultRepo] Ranks successfully calculated and updated for quiz 39 within transaction
app_1       | 2026/02/12 16:17:50 [ResultService] Ранги для викторины #39 успешно рассчитаны и сохранены в транзакции.
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/result_repo.go:152
app_1       | [6.284ms] [rows:1] 
app_1       |   WITH RankedResults AS (
app_1       |       SELECT
app_1       |           id,
app_1       |           RANK() OVER (ORDER BY score DESC, correct_answers DESC) as calculated_rank
app_1       |       FROM results
app_1       |       WHERE quiz_id = 39
app_1       |   )
app_1       |   UPDATE results r
app_1       |   SET rank = rr.calculated_rank
app_1       |   FROM RankedResults rr
app_1       |   WHERE r.id = rr.id AND r.quiz_id = 39;
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/result_repo.go:191
app_1       | [1.750ms] [rows:0] SELECT "user_id" FROM "results" WHERE quiz_id = 39 AND correct_answers = 10 AND is_eliminated = false
app_1       | 2026/02/12 16:17:50 [ResultRepo] FindAndUpdateWinners: Quiz 39, Winners found: 0, Prize per winner: 0 (within transaction)
app_1       | 
app_1       | 2026/02/12 16:17:50 /app/internal/repository/postgres/result_repo.go:231
app_1       | [2.106ms] [rows:1] UPDATE "results" SET "is_winner"=false,"prize_fund"=0,"updated_at"='2026-02-12 16:17:50.825' WHERE quiz_id = 39
app_1       | 2026/02/12 16:17:50 [ResultService] Найдено и обновлено 0 победителей для викторины #39 в транзакции. Приз на победителя: 0.
app_1       | 2026/02/12 16:17:50 ShardedHub: Broadcasting message to Quiz 39 across all shards
app_1       | 2026/02/12 16:17:50 [Shard 3][Quiz 39] BroadcastToQuiz called. Message type: quiz:results_available
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39] BroadcastToQuiz called. Message type: quiz:results_available
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][Range] Iterating over client: User 1, Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Attempting to queue message type: quiz:results_available
app_1       | 2026/02/12 16:17:50 [Shard 0][Quiz 39][User 1][Conn 02bf2f69-6f49-4c9d-beb4-d6b106d286a6] Successfully queued message type: quiz:results_available. Buffer len: 0
app_1       | 2026/02/12 16:17:50 Shard 0: Message broadcast to 1 clients in Quiz 39
app_1       | 2026/02/12 16:17:50 [Shard 1][Quiz 39] BroadcastToQuiz called. Message type: quiz:results_available
app_1       | 2026/02/12 16:17:50 [Shard 2][Quiz 39] BroadcastToQuiz called. Message type: quiz:results_available
app_1       | 2026/02/12 16:17:50 ShardedHub: Finished broadcasting to Quiz 39
app_1       | 2026/02/12 16:17:50 [ResultService] Событие quiz:results_available для викторины #39 успешно отправлено
app_1       | 2026/02/12 16:17:50 [ResultService] Финализация результатов для викторины #39 успешно завершена.
app_1       | 2026/02/12 16:17:53 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [1.583ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:17:53.495') OR (is_active = false AND rotated_at > '2026-02-05 16:17:53.495' AND expires_at > '2026-02-12 16:17:53.495') ORDER BY created_at DESC
app_1       | 
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/user_repo.go:33
app_1       | [0.758ms] [rows:1] SELECT * FROM "users" WHERE "users"."id" = 1 ORDER BY "users"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:17:53 | 200 |    3.032222ms |      172.18.0.6 | GET      "/api/users/me"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /api/users/me HTTP/2.0" 200 286 "https://qazaquiz.duckdns.org/quiz/39/play" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /quiz/39/results?_rsc=1wm88 HTTP/2.0" 200 1220 "https://qazaquiz.duckdns.org/quiz/39/play" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
app_1       | 
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [1.316ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:17:53.63') OR (is_active = false AND rotated_at > '2026-02-05 16:17:53.63' AND expires_at > '2026-02-12 16:17:53.63') ORDER BY created_at DESC
app_1       | 2026/02/12 16:17:53 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/user_repo.go:33
app_1       | [2.508ms] [rows:1] SELECT * FROM "users" WHERE "users"."id" = 1 ORDER BY "users"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:17:53 | 200 |    4.652646ms |      172.18.0.6 | GET      "/api/users/me"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /api/users/me HTTP/2.0" 200 286 "https://qazaquiz.duckdns.org/quiz/39/play" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /quiz/39/results?_rsc=1wm88 HTTP/2.0" 200 1219 "https://qazaquiz.duckdns.org/quiz/39/play" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /_next/static/chunks/a009af5afd8529be.js HTTP/2.0" 200 10909 "https://qazaquiz.duckdns.org/quiz/39/play" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
app_1       | 2026/02/12 16:17:53 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 2026/02/12 16:17:53 [TokenManager] Successfully retrieved CSRF secret cookie '__Host-csrf-secret'
app_1       | 
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [0.782ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:17:53.776') OR (is_active = false AND rotated_at > '2026-02-05 16:17:53.776' AND expires_at > '2026-02-12 16:17:53.776') ORDER BY created_at DESC
app_1       | [GIN] 2026/02/12 - 16:17:53 | 200 |    1.351356ms |      172.18.0.6 | GET      "/api/auth/csrf"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /api/auth/csrf HTTP/2.0" 200 81 "https://qazaquiz.duckdns.org/quiz/39/play" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
app_1       | 
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/result_repo.go:60
app_1       | [1.227ms] [rows:1] SELECT count(*) FROM "results" WHERE quiz_id = 39
app_1       | 
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/result_repo.go:72
app_1       | [1.695ms] [rows:1] SELECT * FROM "results" WHERE quiz_id = 39 ORDER BY rank ASC, score DESC LIMIT 20
app_1       | [GIN] 2026/02/12 - 16:17:53 | 200 |    4.196447ms |      172.18.0.6 | GET      "/api/quizzes/39/results?page=1&page_size=20"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /api/quizzes/39/results?page=1&page_size=20 HTTP/2.0" 200 330 "https://qazaquiz.duckdns.org/quiz/39/results" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
app_1       | 
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:53 +0000] "GET /api/quizzes/39 HTTP/2.0" 200 292 "https://qazaquiz.duckdns.org/quiz/39/results" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
app_1       | 2026/02/12 16:17:53 /app/internal/repository/postgres/quiz_repo.go:35
app_1       | [7.018ms] [rows:1] SELECT * FROM "quizzes" WHERE "quizzes"."id" = 39 ORDER BY "quizzes"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:17:53 | 200 |    7.733886ms |      172.18.0.6 | GET      "/api/quizzes/39"
app_1       | 
app_1       | 2026/02/12 16:17:54 /app/internal/repository/postgres/jwt_key_repo.go:131
app_1       | [0.889ms] [rows:1] SELECT * FROM "jwt_keys" WHERE (is_active = true AND expires_at > '2026-02-12 16:17:54.019') OR (is_active = false AND rotated_at > '2026-02-05 16:17:54.019' AND expires_at > '2026-02-12 16:17:54.019') ORDER BY created_at DESC
app_1       | 2026/02/12 16:17:54 [JWT] Токен успешно проверен для пользователя ID=1, Email=temirlan@mail.ru, выдан: 2026-02-11 17:22:15 +0000 UTC
app_1       | 
app_1       | 2026/02/12 16:17:54 /app/internal/repository/postgres/result_repo.go:103
app_1       | [5.281ms] [rows:1] SELECT * FROM "results" WHERE user_id = 1 AND quiz_id = 39 ORDER BY "results"."id" LIMIT 1
app_1       | [GIN] 2026/02/12 - 16:17:54 | 200 |    6.739771ms |      172.18.0.6 | GET      "/api/quizzes/39/my-result"
nginx_1     | 185.212.247.188 - - [12/Feb/2026:16:17:54 +0000] "GET /api/quizzes/39/my-result HTTP/2.0" 200 283 "https://qazaquiz.duckdns.org/quiz/39/results" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" "-"
^CERROR: Aborting.
saizhansco@instance-20260124-111940:~/myapp/trivia-api$